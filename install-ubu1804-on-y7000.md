# How to install ubuntu 18.04 LTS on LEGION Y7000

## 环境

i7-8750 + 16G DDR + 512G SSD + 1T HDD

SSD上是出厂配置，为GPT分区表，包含UEFI分区，win10已装好，uefi引导。

1T HDD是自己装上去的，刚分区的时候使用fdisk分的区，使用了默认的MBR分区表，被这个坑了。

为了保护SSD寿命，又想ubuntu能快点，所以本人只是把boot和root挂载点做在SSD上，tmp以及var和home都在机械硬盘上。

本以为引导和启动使用的挂载点都在SSD上，而其他目录在MBR分区的硬盘上，这样应该没有问题。。。。

### 过程1

正常安装，正常分区，boot和root都选在SSD上，引导记录放在boot目录的分区。启动时UEFI启动菜单有ubuntu选择，可是选择之后进入grub。到此放弃，没有继续使用grub手动引导内核的方式。

### 过程2 

正常安装，正常分区，boot和root都选在SSD上，引导记录放在UEFI分区上。启动时UEFI启动菜单有ubuntu选择，可是选择之后进入grub。到此放弃，没有继续使用grub手动引导内核的方式。

### 过程3

正常安装，正常分区，boot和root都选在SSD上，引导记录放在boot分区上。启动时UEFI启动菜单有ubuntu选择，可是选择之后进入grub。到此没放弃，进入liveCD后按照网上教程使用boot-repair尝试修复，失败告终，现象和上述一样。

### 过程4

正常安装，正常分区，boot和root都选在SSD上，引导记录放在boot分区上。启动时UEFI启动菜单有ubuntu选择，可是选择之后进入grub。到此没放弃，重启选择进入win10，安装easyUEFI，尝试新增一个启动项指向boot分区，最后失败告终，现象和上述一致。

### 过程5

经过上述折腾，享受了一轮从入门到放弃的过程。。。休息两天后，手又痒了。这回终于想到是不是HDD不是GPT分区的原因？不管了，死马当死马医吧。尝试在liveCD模式下使用parted命令分了几个区。然后开始正常安装，最后重启的时候，又等了半个小时，才把sda的cache回写完，强制重启，这回终于正常进入登陆界面了。但是发现无法调节亮度。。。

*至此安装过程走完。*

## 显卡问题

安装前已经做了功课，知道安装完成后可能因为显卡问题无法进入桌面。所以我安装时都是选择

试用模式来安装。为啥？因为安装完成后我可以先不重启，修改grub配置再启动。

#### 添加 nomodeset

安装完成后，选择“继续使用”，然后

vi  /boot/grub/grub.cfg

搜索 splash

在搜索到的第一个 splash 后加上启动参数  nomodeset，选择使用独立显卡，然后保存，就可以重启了。

#### 无法调节亮度问题

启动后更新一轮软件库db，然后在设置里边选择“附加驱动” (additional drivers)，然后选择安装NVIDIA闭源驱动。等待他下载安装完成后，重启电脑，就可以调节亮度了，但是再打开 *附加驱动* 发现选择的还是开源的驱动。不过这时已经可以调节亮度了，因为本人暂时还不需要安装CUDA，所以先暂时不管了。折腾累了。

#### 不确定的小问题

在解决亮度问题时，我有尝试在启动参数添加了 *acpi_osi=linux* ，然后才尝试通过附加驱动安装NVIDIA驱动，不知道这个是否会对亮度调节有影响，至今参数仍保留，后续需要cuda的再折腾吧。



